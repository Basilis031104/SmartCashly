<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sign in • Smartcashly</title>

  <!-- global styles -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- ----------  HEADER  ---------- -->
  <header>
    <img src="img/logo.svg" alt="Smartcashly logo" class="logo-img" />

    <!-- empty space (no search bar on auth pages) -->
    <div style="flex:1 1 auto;"></div>

    <nav class="auth-nav">
      <a href="index.html" class="btn btn--secondary">Home</a>
      <a href="signup.html" class="btn">Sign Up</a>
    </nav>
  </header>

  <!-- ----------  MAIN  ---------- -->
  <main>
    <h2>Login to Smartcashly</h2>
    <p>Enter your credentials to continue</p>

    <form id="login_form" class="form-container" style="margin-top:2rem;">
      <label>
        Email<br/>
        <input type="email" name="email" id="lg_email" required />
      </label>

      <label style="margin-left:1rem;">
        Password<br/>
        <input type="password" name="password" id="lg_pass" required />
      </label>

      <button type="submit" class="btn" style="margin-left:1rem;">Login</button>
    </form>

    <p style="margin-top:.6rem;">
      <a href="reset.html">Forgot your password?</a>
    </p>

    <p id="lg_msg" style="margin-top:1rem; font-weight:600;"></p>
  </main>

  <!-- ----------  FOOTER  ---------- -->
  <footer>
    © <span id="year"></span> Smartcashly. All rights reserved.
  </footer>

  <!-- falling-cash background (same UL used on landing page) -->
  <ul class="coin-rain">
    <li>$</li><li>$</li><li>$</li><li>$</li>
    <li>$</li><li>$</li><li>$</li><li>$</li>
  </ul>

  <!-- ----------  SCRIPTS  ---------- -->
  <!-- your minimal wrapper around Firebase JS SDK -->
  <script src="smartAuth.js"></script>

  <script>
    /* update footer year */
    document.getElementById('year').textContent = new Date().getFullYear();

    /* login form */
    const lg_form = document.getElementById('login_form');
    const lg_email = document.getElementById('lg_email');
    const lg_pass  = document.getElementById('lg_pass');
    const lg_msg   = document.getElementById('lg_msg');

    lg_form.addEventListener('submit', async (e) => {
      e.preventDefault();
      lg_msg.textContent = '';

      try {
        await smartAuth.login(lg_email.value.trim(), lg_pass.value);
        lg_msg.style.color = '#008e45';
        lg_msg.textContent = 'Success! Redirecting…';
        window.location.href = 'index.html';
      } catch (err) {
        lg_msg.style.color = 'crimson';
        lg_msg.textContent  = err.code.replace('auth/', '');
      }
    });
  </script>
</body>
</html>
