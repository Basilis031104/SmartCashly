<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reset Password • Smartcashly</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- ▄▄▄ HEADER ▄▄▄ -->
  <header>
    <img src="logo.png" alt="Smartcashly logo" class="logo-img" />
    <nav class="auth-nav">
      <a href="index.html" class="btn btn--secondary">Home</a>
    </nav>
  </header>

  <!-- ▄▄▄ RESET FORM ▄▄▄ -->
  <main class="form-container">
    <h2>Forgot your password?</h2>

    <!-- the dash stays, we will reference by getElementById -->
    <form id="reset-form">
      <input
        type="email"
        id="rp_email"
        placeholder="Enter your email"
        required />
      <button class="btn btn--full">Send reset link</button>
      <p id="rp_msg" class="form-error"></p>
    </form>
  </main>

  <footer>© <span id="year"></span> Smartcashly.</footer>

  <!-- Firebase helper (contains smartAuth) -->
  <script type="module" src="auth.js"></script>

  <!-- Page-specific logic -->
  <script>
    /* show current year in footer */
    document.getElementById("year").textContent = new Date().getFullYear();

    /* send reset email */
    document
      .getElementById("reset-form")          // explicit reference (no dash issue)
      .addEventListener("submit", async (e) => {
        e.preventDefault();
        const msg = document.getElementById("rp_msg");
        msg.textContent = "";
        msg.style.color = "#c00";

        try {
          await smartAuth.reset(
            document.getElementById("rp_email").value.trim()
          );
          msg.textContent = "Reset email sent! Check your inbox.";
          msg.style.color = "#008e45";       // green success
        } catch (err) {
          console.error(err);
          msg.textContent = err.code.replace("auth/","");
        }
      });
  </script>
</body>
</html>
